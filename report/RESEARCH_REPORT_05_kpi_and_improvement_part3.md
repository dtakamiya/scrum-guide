# ã‚¢ã‚¸ãƒ£ã‚¤ãƒ«é–‹ç™ºãƒãƒ¼ãƒ è¨ˆæ¸¬ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹èª¿æŸ»ãƒ¬ãƒãƒ¼ãƒˆ ç¬¬3éƒ¨

## å®Ÿè£…ã‚¬ã‚¤ãƒ‰ã¨ãƒ„ãƒ¼ãƒ«è©³ç´°

### 1. ãƒ¡ãƒˆãƒªã‚¯ã‚¹å®Ÿè£…ã®æŠ€è¡“çš„è©³ç´°

#### 1.1 ãƒ‡ãƒ¼ã‚¿åé›†ã®è‡ªå‹•åŒ–æˆ¦ç•¥

**æ¨å¥¨ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹   â”‚    â”‚   ãƒ‡ãƒ¼ã‚¿åé›†     â”‚    â”‚   ãƒ‡ãƒ¼ã‚¿å‡¦ç†     â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚ â€¢ ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³â”‚â”€â”€â”€â–¶â”‚ â€¢ ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ   â”‚â”€â”€â”€â–¶â”‚ â€¢ ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚° â”‚
â”‚ â€¢ ã‚¤ãƒ³ãƒ•ãƒ©      â”‚    â”‚ â€¢ API           â”‚    â”‚ â€¢ ãƒãƒƒãƒå‡¦ç†     â”‚
â”‚ â€¢ ãƒ­ã‚°          â”‚    â”‚ â€¢ ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚° â”‚    â”‚ â€¢ ãƒ‡ãƒ¼ã‚¿å¤‰æ›     â”‚
â”‚ â€¢ ãƒ¡ãƒˆãƒªã‚¯ã‚¹    â”‚    â”‚ â€¢ ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•  â”‚    â”‚ â€¢ æ­£è¦åŒ–        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å¯è¦–åŒ–        â”‚â—€â”€â”€â”€â”‚   ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ â”‚â—€â”€â”€â”€â”‚   ãƒ‡ãƒ¼ã‚¿å‡¦ç†     â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚ â€¢ ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰â”‚    â”‚ â€¢ æ™‚ç³»åˆ—DB      â”‚    â”‚ â€¢ ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚° â”‚
â”‚ â€¢ ã‚¢ãƒ©ãƒ¼ãƒˆ      â”‚    â”‚ â€¢ ãƒ‡ãƒ¼ã‚¿ãƒ¬ã‚¤ã‚¯   â”‚    â”‚ â€¢ ãƒãƒƒãƒå‡¦ç†     â”‚
â”‚ â€¢ ãƒ¬ãƒãƒ¼ãƒˆ      â”‚    â”‚ â€¢ ã‚­ãƒ£ãƒƒã‚·ãƒ¥     â”‚    â”‚ â€¢ ãƒ‡ãƒ¼ã‚¿å¤‰æ›     â”‚
â”‚ â€¢ ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ  â”‚    â”‚ â€¢ ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—   â”‚    â”‚ â€¢ æ­£è¦åŒ–        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 1.2 ä¸»è¦ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã®å®Ÿè£…æ–¹æ³•

**DORAãƒ¡ãƒˆãƒªã‚¯ã‚¹ã®å®Ÿè£…**:

1. **ãƒ‡ãƒ—ãƒ­ã‚¤é »åº¦**
   ```yaml
   # æ¸¬å®šæ–¹æ³•
   - ãƒ‡ãƒ—ãƒ­ã‚¤ã‚¤ãƒ™ãƒ³ãƒˆã®è‡ªå‹•æ¤œå‡º
   - CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‹ã‚‰ã®é€šçŸ¥
   - æœ¬ç•ªç’°å¢ƒã¸ã®å¤‰æ›´æ¤œçŸ¥
   
   # å®Ÿè£…ä¾‹ (GitHub Actions)
   name: Deploy Metrics
   on:
     deployment:
   jobs:
     collect-metrics:
       runs-on: ubuntu-latest
       steps:
         - name: Record Deployment
           run: |
             echo "Deployment at $(date)" >> metrics/deployments.log
   ```

2. **ãƒªãƒ¼ãƒ‰ã‚¿ã‚¤ãƒ **
   ```yaml
   # æ¸¬å®šæ–¹æ³•
   - ã‚³ãƒŸãƒƒãƒˆã‹ã‚‰ãƒ‡ãƒ—ãƒ­ã‚¤ã¾ã§ã®æ™‚é–“
   - ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆä½œæˆã‹ã‚‰ãƒãƒ¼ã‚¸ã¾ã§
   - æ©Ÿèƒ½è¦æ±‚ã‹ã‚‰ãƒªãƒªãƒ¼ã‚¹ã¾ã§
   
   # å®Ÿè£…ä¾‹
   - name: Calculate Lead Time
     run: |
       COMMIT_TIME=$(git log -1 --format=%ct)
       DEPLOY_TIME=$(date +%s)
       LEAD_TIME=$((DEPLOY_TIME - COMMIT_TIME))
       echo "Lead time: ${LEAD_TIME} seconds"
   ```

3. **å¹³å‡ä¿®å¾©æ™‚é–“**
   ```yaml
   # æ¸¬å®šæ–¹æ³•
   - éšœå®³æ¤œçŸ¥ã‹ã‚‰ä¿®å¾©å®Œäº†ã¾ã§
   - ã‚¢ãƒ©ãƒ¼ãƒˆç™ºç”Ÿã‹ã‚‰è§£æ±ºã¾ã§
   - ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆç®¡ç†ã‚·ã‚¹ãƒ†ãƒ é€£æº
   
   # å®Ÿè£…ä¾‹
   - name: Track MTTR
     run: |
       INCIDENT_START=$(cat incident_start.txt)
       INCIDENT_END=$(date +%s)
       MTTR=$((INCIDENT_END - INCIDENT_START))
       echo "MTTR: ${MTTR} seconds"
   ```

4. **å¤‰æ›´å¤±æ•—ç‡**
   ```yaml
   # æ¸¬å®šæ–¹æ³•
   - ãƒ‡ãƒ—ãƒ­ã‚¤å¾Œã®éšœå®³ç™ºç”Ÿç‡
   - ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯é »åº¦
   - é¡§å®¢å ±å‘Šã®éšœå®³æ•°
   
   # å®Ÿè£…ä¾‹
   - name: Calculate Change Failure Rate
     run: |
       TOTAL_DEPLOYMENTS=$(wc -l < deployments.log)
       FAILED_DEPLOYMENTS=$(wc -l < failed_deployments.log)
       FAILURE_RATE=$((FAILED_DEPLOYMENTS * 100 / TOTAL_DEPLOYMENTS))
       echo "Change failure rate: ${FAILURE_RATE}%"
   ```

#### 1.3 å¿ƒç†çš„å®‰å…¨æ€§ã®æ¸¬å®š

**æ¸¬å®šæ–¹æ³•**:
1. **åŒ¿åã‚¢ãƒ³ã‚±ãƒ¼ãƒˆ**
   - å®šæœŸçš„ãªãƒãƒ¼ãƒ èª¿æŸ»
   - å¿ƒç†çš„å®‰å…¨æ€§ã‚¹ã‚³ã‚¢
   - æ”¹å–„ææ¡ˆã®åé›†

2. **è¡Œå‹•è¦³å¯Ÿ**
   - ä¼šè­°ã§ã®ç™ºè¨€é »åº¦
   - è³ªå•ãƒ»æ„è¦‹ã®æ•°
   - å¤±æ•—ã®å…±æœ‰é »åº¦

3. **ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯åˆ†æ**
   - ãƒ¬ãƒˆãƒ­ã‚¹ãƒšã‚¯ãƒ†ã‚£ãƒ–ã§ã®ç™ºè¨€
   - 1on1ã§ã®æ„è¦‹
   - é›¢è·ç‡ã¨ã®ç›¸é–¢

**å®Ÿè£…ä¾‹**:
```python
# å¿ƒç†çš„å®‰å…¨æ€§ã‚¹ã‚³ã‚¢è¨ˆç®—
def calculate_psychological_safety_scores(responses):
    scores = {
        'speak_up': 0,
        'mistake_sharing': 0,
        'help_seeking': 0,
        'challenge_status_quo': 0
    }
    
    for response in responses:
        scores['speak_up'] += response.get('speak_up', 0)
        scores['mistake_sharing'] += response.get('mistake_sharing', 0)
        scores['help_seeking'] += response.get('help_seeking', 0)
        scores['challenge_status_quo'] += response.get('challenge_status_quo', 0)
    
    # å¹³å‡ã‚¹ã‚³ã‚¢ã‚’è¨ˆç®—
    for key in scores:
        scores[key] = scores[key] / len(responses)
    
    return scores
```

### 2. ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰è¨­è¨ˆã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

#### 2.1 ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®éšå±¤è¨­è¨ˆ

**ãƒ¬ãƒ™ãƒ«1: ã‚¨ã‚°ã‚¼ã‚¯ãƒ†ã‚£ãƒ–ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ã‚¨ã‚°ã‚¼ã‚¯ãƒ†ã‚£ãƒ–ãƒ“ãƒ¥ãƒ¼                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ãƒ“ã‚¸ãƒã‚¹ä¾¡å€¤ â”‚ é¡§å®¢æº€è¶³åº¦ â”‚ å¸‚å ´æŠ•å…¥æ™‚é–“ â”‚ ã‚¤ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³èƒ½åŠ› â”‚
â”‚    85%      â”‚    78%     â”‚   2é€±é–“     â”‚      72%        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ä¸»è¦KPIãƒˆãƒ¬ãƒ³ãƒ‰                                         â”‚
â”‚ ğŸ“ˆ ãƒ‡ãƒ—ãƒ­ã‚¤é »åº¦: é€±3å› â†’ é€±5å›                         â”‚
â”‚ ğŸ“‰ ãƒªãƒ¼ãƒ‰ã‚¿ã‚¤ãƒ : 3é€±é–“ â†’ 2é€±é–“                         â”‚
â”‚ ğŸ“ˆ é¡§å®¢æº€è¶³åº¦: 70% â†’ 78%                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ãƒ¬ãƒ™ãƒ«2: ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ãƒ“ãƒ¥ãƒ¼                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ãƒãƒ¼ãƒ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ â”‚ ãƒ—ãƒ­ã‚»ã‚¹åŠ¹ç‡ â”‚ å“è³ªæŒ‡æ¨™ â”‚ ãƒãƒ¼ãƒ å¥åº·åº¦ â”‚
â”‚       82%          â”‚     75%      â”‚   88%   â”‚     85%     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ è©³ç´°ãƒ¡ãƒˆãƒªã‚¯ã‚¹                                         â”‚
â”‚ â€¢ ã‚¹ãƒ—ãƒªãƒ³ãƒˆå®Œäº†ç‡: 95%                                â”‚
â”‚ â€¢ ãƒã‚°ç™ºç”Ÿç‡: 2.3%                                    â”‚
â”‚ â€¢ ãƒãƒ¼ãƒ æº€è¶³åº¦: 4.2/5.0                               â”‚
â”‚ â€¢ çŸ¥è­˜å…±æœ‰é »åº¦: é€±3å›                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ãƒ¬ãƒ™ãƒ«3: ãƒãƒ¼ãƒ ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ãƒãƒ¼ãƒ ãƒ“ãƒ¥ãƒ¼                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ã‚¹ãƒ—ãƒªãƒ³ãƒˆé€²æ— â”‚ æŠ€è¡“çš„è² å‚µ â”‚ å­¦ç¿’æŒ‡æ¨™ â”‚ å”åŠ›æŒ‡æ¨™ â”‚
â”‚     78%       â”‚    15%    â”‚   82%   â”‚   88%   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¢ã‚¤ãƒ†ãƒ                                       â”‚
â”‚ â€¢ ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼æ™‚é–“ã®çŸ­ç¸®                              â”‚
â”‚ â€¢ ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ã®å‘ä¸Š                               â”‚
â”‚ â€¢ ãƒšã‚¢ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã®å¢—åŠ                              â”‚
â”‚ â€¢ æŠ€è¡“å‹‰å¼·ä¼šã®å®šæœŸé–‹å‚¬                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 2.2 å¯è¦–åŒ–ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

**è‰²ã®ä½¿ç”¨åŸå‰‡**:
- **ç·‘**: è‰¯å¥½ãªçŠ¶æ…‹ã€ç›®æ¨™é”æˆ
- **é»„**: æ³¨æ„ãŒå¿…è¦ã€æ”¹å–„ã®ä½™åœ°
- **èµ¤**: å•é¡Œã‚ã‚Šã€å³åº§ã®å¯¾å¿œãŒå¿…è¦
- **é’**: ä¸­ç«‹ã€æƒ…å ±æä¾›

**ã‚°ãƒ©ãƒ•ã®é¸æŠ**:
- **æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿**: æŠ˜ã‚Œç·šã‚°ãƒ©ãƒ•
- **æ¯”è¼ƒãƒ‡ãƒ¼ã‚¿**: æ£’ã‚°ãƒ©ãƒ•
- **æ§‹æˆæ¯”**: å††ã‚°ãƒ©ãƒ•
- **ç›¸é–¢é–¢ä¿‚**: æ•£å¸ƒå›³
- **åˆ†å¸ƒ**: ãƒ’ã‚¹ãƒˆã‚°ãƒ©ãƒ 

### 3. ãƒ„ãƒ¼ãƒ«çµ±åˆã®å®Ÿè£…ã‚¬ã‚¤ãƒ‰

#### 3.1 CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³çµ±åˆ

**GitHub Actionsä¾‹**:
```yaml
name: Collect Metrics
on:
  push:
    branches: [main]
  pull_request:
    branches: [main]

jobs:
  collect-metrics:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Calculate Metrics
        run: |
          # ãƒ‡ãƒ—ãƒ­ã‚¤é »åº¦ã®è¨˜éŒ²
          echo "$(date)" >> metrics/deployments.log
          
          # ãƒªãƒ¼ãƒ‰ã‚¿ã‚¤ãƒ ã®è¨ˆç®—
          COMMIT_TIME=$(git log -1 --format=%ct)
          CURRENT_TIME=$(date +%s)
          LEAD_TIME=$((CURRENT_TIME - COMMIT_TIME))
          echo "Lead time: ${LEAD_TIME} seconds" >> metrics/lead_time.log
          
          # ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ã®è¨˜éŒ²
          COVERAGE=$(npm run test:coverage | grep -o '[0-9]*%' | head -1)
          echo "Coverage: ${COVERAGE}" >> metrics/coverage.log
      
      - name: Upload Metrics
        uses: actions/upload-artifact@v3
        with:
          name: metrics
          path: metrics/
```

#### 3.2 ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ çµ±åˆ

**Prometheusè¨­å®šä¾‹**:
```yaml
# prometheus.yml
global:
  scrape_interval: 15s

scrape_configs:
  - job_name: 'application'
    static_configs:
      - targets: ['localhost:8080']
    
  - job_name: 'deployment-metrics'
    static_configs:
      - targets: ['localhost:9090']
    
  - job_name: 'team-metrics'
    static_configs:
      - targets: ['localhost:9100']
```

**ã‚«ã‚¹ã‚¿ãƒ ãƒ¡ãƒˆãƒªã‚¯ã‚¹å®šç¾©**:
```python
# metrics_collector.py
from prometheus_client import Counter, Histogram, Gauge

# ãƒ‡ãƒ—ãƒ­ã‚¤é »åº¦
deployment_counter = Counter('deployments_total', 'Total number of deployments')

# ãƒªãƒ¼ãƒ‰ã‚¿ã‚¤ãƒ 
lead_time_histogram = Histogram('lead_time_seconds', 'Lead time in seconds')

# ãƒãƒ¼ãƒ æº€è¶³åº¦
team_satisfaction_gauge = Gauge('team_satisfaction_score', 'Team satisfaction score')

# å¿ƒç†çš„å®‰å…¨æ€§ã‚¹ã‚³ã‚¢
psychological_safety_gauge = Gauge('psychological_safety_score', 'Psychological safety score')
```

#### 3.3 ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ

**æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ (InfluxDB)**:
```sql
-- ãƒ¡ãƒˆãƒªã‚¯ã‚¹ãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆ
CREATE DATABASE agile_metrics

-- ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆãƒ¡ãƒˆãƒªã‚¯ã‚¹
CREATE MEASUREMENT deployments (
  time TIMESTAMP,
  team STRING,
  environment STRING,
  duration INTEGER,
  success BOOLEAN
)

-- ãƒãƒ¼ãƒ ãƒ¡ãƒˆãƒªã‚¯ã‚¹
CREATE MEASUREMENT team_metrics (
  time TIMESTAMP,
  team STRING,
  velocity FLOAT,
  satisfaction FLOAT,
  psychological_safety FLOAT
)

-- ãƒ—ãƒ­ã‚»ã‚¹ãƒ¡ãƒˆãƒªã‚¯ã‚¹
CREATE MEASUREMENT process_metrics (
  time TIMESTAMP,
  team STRING,
  lead_time INTEGER,
  cycle_time INTEGER,
  throughput INTEGER
)
```

### 4. ã‚¢ãƒ©ãƒ¼ãƒˆã¨é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ 

#### 4.1 ã‚¢ãƒ©ãƒ¼ãƒˆãƒ«ãƒ¼ãƒ«ã®è¨­è¨ˆ

**é‡è¦åº¦åˆ¥ã‚¢ãƒ©ãƒ¼ãƒˆ**:
```yaml
# alert_rules.yml
groups:
  - name: critical_alerts
    rules:
      - alert: HighFailureRate
        expr: change_failure_rate > 0.15
        for: 5m
        labels:
          severity: critical
        annotations:
          summary: "High change failure rate detected"
          
      - alert: LongLeadTime
        expr: lead_time_seconds > 604800  # 1é€±é–“
        for: 10m
        labels:
          severity: warning
        annotations:
          summary: "Lead time exceeds 1 week"
          
  - name: team_health_alerts
    rules:
      - alert: LowTeamSatisfaction
        expr: team_satisfaction_score < 3.0
        for: 1h
        labels:
          severity: warning
        annotations:
          summary: "Team satisfaction below threshold"
          
      - alert: LowPsychologicalSafety
        expr: psychological_safety_score < 3.5
        for: 1h
        labels:
          severity: warning
        annotations:
          summary: "Psychological safety below threshold"
```

#### 4.2 é€šçŸ¥ãƒãƒ£ãƒ³ãƒãƒ«ã®è¨­å®š

**Slacké€šçŸ¥ä¾‹**:
```python
# slack_notifier.py
import requests
import json

class SlackNotifier:
    def __init__(self, webhook_url):
        self.webhook_url = webhook_url
    
    def send_alert(self, alert_data):
        message = {
            "text": f"ğŸš¨ Alert: {alert_data['summary']}",
            "attachments": [
                {
                    "color": "danger" if alert_data['severity'] == 'critical' else "warning",
                    "fields": [
                        {
                            "title": "Team",
                            "value": alert_data.get('team', 'Unknown'),
                            "short": True
                        },
                        {
                            "title": "Metric",
                            "value": alert_data.get('metric', 'Unknown'),
                            "short": True
                        },
                        {
                            "title": "Current Value",
                            "value": alert_data.get('value', 'Unknown'),
                            "short": True
                        },
                        {
                            "title": "Threshold",
                            "value": alert_data.get('threshold', 'Unknown'),
                            "short": True
                        }
                    ]
                }
            ]
        }
        
        response = requests.post(self.webhook_url, json=message)
        return response.status_code == 200
```

### 5. ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆã®è‡ªå‹•åŒ–

#### 5.1 å®šæœŸãƒ¬ãƒãƒ¼ãƒˆã®ç”Ÿæˆ

**é€±æ¬¡ãƒ¬ãƒãƒ¼ãƒˆä¾‹**:
```python
# weekly_report_generator.py
import pandas as pd
import matplotlib.pyplot as plt
from datetime import datetime, timedelta

class WeeklyReportGenerator:
    def __init__(self, metrics_db):
        self.metrics_db = metrics_db
    
    def generate_weekly_report(self, team_name, week_start):
        # ãƒ‡ãƒ¼ã‚¿åé›†
        week_end = week_start + timedelta(days=7)
        
        # ãƒ¡ãƒˆãƒªã‚¯ã‚¹å–å¾—
        deployments = self.get_deployments(team_name, week_start, week_end)
        lead_times = self.get_lead_times(team_name, week_start, week_end)
        team_satisfaction = self.get_team_satisfaction(team_name, week_start, week_end)
        
        # ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
        report = {
            'team': team_name,
            'period': f"{week_start.strftime('%Y-%m-%d')} to {week_end.strftime('%Y-%m-%d')}",
            'metrics': {
                'deployments': len(deployments),
                'avg_lead_time': lead_times.mean(),
                'team_satisfaction': team_satisfaction.mean(),
                'success_rate': self.calculate_success_rate(deployments)
            },
            'trends': self.calculate_trends(team_name, week_start, week_end),
            'recommendations': self.generate_recommendations(team_name, week_start, week_end)
        }
        
        return report
    
    def generate_recommendations(self, team_name, week_start, week_end):
        recommendations = []
        
        # ãƒªãƒ¼ãƒ‰ã‚¿ã‚¤ãƒ ãŒé•·ã„å ´åˆ
        avg_lead_time = self.get_lead_times(team_name, week_start, week_end).mean()
        if avg_lead_time > 604800:  # 1é€±é–“
            recommendations.append("Consider reducing lead time through process optimization")
        
        # ãƒãƒ¼ãƒ æº€è¶³åº¦ãŒä½ã„å ´åˆ
        avg_satisfaction = self.get_team_satisfaction(team_name, week_start, week_end).mean()
        if avg_satisfaction < 3.5:
            recommendations.append("Focus on improving team satisfaction and psychological safety")
        
        return recommendations
```

#### 5.2 å¯è¦–åŒ–ãƒ¬ãƒãƒ¼ãƒˆã®ç”Ÿæˆ

**HTMLãƒ¬ãƒãƒ¼ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ**:
```html
<!-- report_template.html -->
<!DOCTYPE html>
<html>
<head>
    <title>Weekly Team Report</title>
    <style>
        .metric-card {
            border: 1px solid #ddd;
            padding: 15px;
            margin: 10px;
            border-radius: 5px;
        }
        .metric-value {
            font-size: 24px;
            font-weight: bold;
            color: #333;
        }
        .metric-label {
            color: #666;
            font-size: 14px;
        }
        .trend-up { color: green; }
        .trend-down { color: red; }
        .trend-stable { color: orange; }
    </style>
</head>
<body>
    <h1>Weekly Team Report</h1>
    <div class="metric-card">
        <div class="metric-value">{{ deployments }}</div>
        <div class="metric-label">Deployments this week</div>
    </div>
    <div class="metric-card">
        <div class="metric-value">{{ avg_lead_time }}</div>
        <div class="metric-label">Average Lead Time (hours)</div>
    </div>
    <div class="metric-card">
        <div class="metric-value">{{ team_satisfaction }}</div>
        <div class="metric-label">Team Satisfaction Score</div>
    </div>
    
    <h2>Recommendations</h2>
    <ul>
        {% for recommendation in recommendations %}
        <li>{{ recommendation }}</li>
        {% endfor %}
    </ul>
</body>
</html>
```

### 6. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã¨ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹

#### 6.1 ãƒ‡ãƒ¼ã‚¿ä¿è­·

**å€‹äººæƒ…å ±ã®åŒ¿ååŒ–**:
```python
# data_anonymizer.py
import hashlib
import re

class DataAnonymizer:
    def __init__(self):
        self.salt = "agile_metrics_salt"
    
    def anonymize_user_data(self, data):
        """å€‹äººæƒ…å ±ã‚’åŒ¿ååŒ–"""
        if isinstance(data, dict):
            return {k: self.anonymize_user_data(v) for k, v in data.items()}
        elif isinstance(data, list):
            return [self.anonymize_user_data(item) for item in data]
        elif isinstance(data, str):
            # ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã®åŒ¿ååŒ–
            if '@' in data:
                return self.hash_email(data)
            # åå‰ã®åŒ¿ååŒ–
            elif re.match(r'^[A-Za-z\s]+$', data):
                return self.hash_name(data)
            else:
                return data
        else:
            return data
    
    def hash_email(self, email):
        """ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ãƒãƒƒã‚·ãƒ¥åŒ–"""
        return hashlib.sha256((email + self.salt).encode()).hexdigest()[:8]
    
    def hash_name(self, name):
        """åå‰ã‚’ãƒãƒƒã‚·ãƒ¥åŒ–"""
        return hashlib.sha256((name + self.salt).encode()).hexdigest()[:8]
```

#### 6.2 ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡

**ãƒ­ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡**:
```python
# access_control.py
from enum import Enum
from functools import wraps

class Role(Enum):
    TEAM_MEMBER = "team_member"
    TEAM_LEAD = "team_lead"
    MANAGER = "manager"
    EXECUTIVE = "executive"

class AccessControl:
    def __init__(self):
        self.permissions = {
            Role.TEAM_MEMBER: ['view_own_team_metrics', 'view_own_satisfaction'],
            Role.TEAM_LEAD: ['view_own_team_metrics', 'view_own_satisfaction', 'view_team_details'],
            Role.MANAGER: ['view_all_team_metrics', 'view_team_details', 'view_trends'],
            Role.EXECUTIVE: ['view_all_metrics', 'view_trends', 'view_reports']
        }
    
    def require_permission(self, permission):
        def decorator(func):
            @wraps(func)
            def wrapper(user, *args, **kwargs):
                if self.has_permission(user.role, permission):
                    return func(user, *args, **kwargs)
                else:
                    raise PermissionError(f"User {user.id} lacks permission: {permission}")
            return wrapper
        return decorator
    
    def has_permission(self, role, permission):
        return permission in self.permissions.get(role, [])
```

### 7. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

#### 7.1 ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æœ€é©åŒ–

**ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æˆ¦ç•¥**:
```sql
-- æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
CREATE INDEX idx_metrics_time ON metrics(time);
CREATE INDEX idx_metrics_team_time ON metrics(team, time);

-- è¤‡åˆã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
CREATE INDEX idx_deployments_team_success_time ON deployments(team, success, time);

-- éƒ¨åˆ†ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ï¼ˆæˆåŠŸã—ãŸãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã®ã¿ï¼‰
CREATE INDEX idx_successful_deployments ON deployments(time) WHERE success = true;
```

#### 7.2 ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥

**Redisã‚­ãƒ£ãƒƒã‚·ãƒ¥è¨­å®š**:
```python
# cache_manager.py
import redis
import json
from datetime import datetime, timedelta

class MetricsCache:
    def __init__(self, redis_host='localhost', redis_port=6379):
        self.redis_client = redis.Redis(host=redis_host, port=redis_port)
        self.default_ttl = 3600  # 1æ™‚é–“
    
    def get_cached_metrics(self, key):
        """ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‹ã‚‰ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’å–å¾—"""
        cached_data = self.redis_client.get(key)
        if cached_data:
            return json.loads(cached_data)
        return None
    
    def set_cached_metrics(self, key, data, ttl=None):
        """ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã«ä¿å­˜"""
        if ttl is None:
            ttl = self.default_ttl
        
        self.redis_client.setex(key, ttl, json.dumps(data))
    
    def invalidate_cache(self, pattern):
        """ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ç„¡åŠ¹åŒ–"""
        keys = self.redis_client.keys(pattern)
        if keys:
            self.redis_client.delete(*keys)
```

### 8. ç›£æŸ»ã¨ãƒ­ã‚°

#### 8.1 ç›£æŸ»ãƒ­ã‚°ã®å®Ÿè£…

**ç›£æŸ»ãƒ­ã‚°æ§‹é€ **:
```python
# audit_logger.py
import logging
from datetime import datetime
from dataclasses import dataclass
from typing import Optional, Dict, Any

@dataclass
class AuditEvent:
    timestamp: datetime
    user_id: str
    action: str
    resource: str
    details: Dict[str, Any]
    ip_address: Optional[str] = None
    user_agent: Optional[str] = None

class AuditLogger:
    def __init__(self, log_file='audit.log'):
        self.logger = logging.getLogger('audit')
        handler = logging.FileHandler(log_file)
        formatter = logging.Formatter(
            '%(asctime)s - %(user_id)s - %(action)s - %(resource)s - %(details)s'
        )
        handler.setFormatter(formatter)
        self.logger.addHandler(handler)
        self.logger.setLevel(logging.INFO)
    
    def log_event(self, event: AuditEvent):
        """ç›£æŸ»ã‚¤ãƒ™ãƒ³ãƒˆã‚’ãƒ­ã‚°ã«è¨˜éŒ²"""
        self.logger.info(
            f"User: {event.user_id}, Action: {event.action}, "
            f"Resource: {event.resource}, Details: {event.details}"
        )
    
    def get_audit_trail(self, user_id: str = None, start_date: datetime = None, end_date: datetime = None):
        """ç›£æŸ»ãƒ­ã‚°ã‚’æ¤œç´¢"""
        # å®Ÿè£…ä¾‹: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‹ã‚‰ç›£æŸ»ãƒ­ã‚°ã‚’æ¤œç´¢
        pass
```

### 9. ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

#### 9.1 ä¸€èˆ¬çš„ãªå•é¡Œã¨è§£æ±ºç­–

**å•é¡Œ1: ãƒ¡ãƒˆãƒªã‚¯ã‚¹ãŒæ›´æ–°ã•ã‚Œãªã„**
```python
# è¨ºæ–­ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
def diagnose_metrics_update():
    issues = []
    
    # ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã®ç¢ºèª
    if not check_data_source_connectivity():
        issues.append("Data source connectivity issue")
    
    # ãƒ‡ãƒ¼ã‚¿å‡¦ç†ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®ç¢ºèª
    if not check_data_processing_pipeline():
        issues.append("Data processing pipeline issue")
    
    # ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã®ç¢ºèª
    if not check_storage_availability():
        issues.append("Storage availability issue")
    
    return issues
```

**å•é¡Œ2: ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãŒé…ã„**
```python
# ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¨ºæ–­
def diagnose_dashboard_performance():
    diagnostics = {
        'query_performance': check_query_performance(),
        'cache_hit_rate': check_cache_hit_rate(),
        'database_connections': check_database_connections(),
        'network_latency': check_network_latency()
    }
    
    return diagnostics
```

### 10. ç¶™ç¶šçš„æ”¹å–„ã®å®Ÿè£…

#### 10.1 ãƒ¡ãƒˆãƒªã‚¯ã‚¹è‡ªä½“ã®æ”¹å–„

**ãƒ¡ãƒˆãƒªã‚¯ã‚¹æœ‰åŠ¹æ€§ã®è©•ä¾¡**:
```python
# metrics_evaluator.py
class MetricsEvaluator:
    def evaluate_metric_effectiveness(self, metric_name, team_data):
        """ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã®æœ‰åŠ¹æ€§ã‚’è©•ä¾¡"""
        evaluation = {
            'relevance': self.calculate_relevance(metric_name, team_data),
            'actionability': self.calculate_actionability(metric_name, team_data),
            'reliability': self.calculate_reliability(metric_name, team_data),
            'timeliness': self.calculate_timeliness(metric_name, team_data)
        }
        
        overall_score = sum(evaluation.values()) / len(evaluation)
        evaluation['overall_score'] = overall_score
        
        return evaluation
    
    def recommend_improvements(self, evaluation):
        """æ”¹å–„ææ¡ˆã‚’ç”Ÿæˆ"""
        recommendations = []
        
        if evaluation['relevance'] < 0.7:
            recommendations.append("Consider adjusting metric definition to better align with team goals")
        
        if evaluation['actionability'] < 0.7:
            recommendations.append("Provide more context and actionable insights with the metric")
        
        if evaluation['reliability'] < 0.7:
            recommendations.append("Improve data collection and validation processes")
        
        return recommendations
```

ã“ã®å®Ÿè£…ã‚¬ã‚¤ãƒ‰ã«ã‚ˆã‚Šã€ã‚¢ã‚¸ãƒ£ã‚¤ãƒ«é–‹ç™ºãƒãƒ¼ãƒ ã®è¨ˆæ¸¬ã‚·ã‚¹ãƒ†ãƒ ã‚’åŠ¹æœçš„ã«æ§‹ç¯‰ã—ã€ç¶™ç¶šçš„ãªæ”¹å–„ã‚’å®Ÿç¾ã§ãã¾ã™ã€‚

---

**èª¿æŸ»å®Ÿæ–½**: 2025å¹´1æœˆ  
**æ¬¡å›æ›´æ–°äºˆå®š**: 2025å¹´7æœˆ  
**èª¿æŸ»è²¬ä»»è€…**: AI Assistant 